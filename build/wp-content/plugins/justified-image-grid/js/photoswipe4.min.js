!function(e,t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,(function(){"use strict";return function(e,t,n,o){var i={features:null,bind:function(e,t,n,o){var i=(o?"remove":"add")+"EventListener";t=t.split(" ");for(var a=0;a<t.length;a++)t[a]&&e[i](t[a],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){return t=document.createElement(t||"div"),e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){i.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){i.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(i.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var o=e.length;o--;)if(e[o][n]===t)return o;return-1},extend:function(e,t,n){for(var o in t)t.hasOwnProperty(o)&&(n&&e.hasOwnProperty(o)||(e[o]=t[o]))},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(i.features)return i.features;var e,t,n=i.createEl().style,o="",a={};a.oldIE=document.all&&!document.addEventListener,a.touch="ontouchstart"in window,window.requestAnimationFrame&&(a.raf=window.requestAnimationFrame,a.caf=window.cancelAnimationFrame),a.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,a.pointerEvent||(e=navigator.userAgent,!/iP(hone|od)/.test(navigator.platform)||(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(a.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(a.isOldAndroid=!0),a.androidVersion=t),a.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var r,l,s,c=["transform","perspective","animationName"],u=["","webkit","Moz","ms","O"],d=0;d<4;d++){o=u[d];for(var p=0;p<3;p++)r=c[p],l=o+(o?r.charAt(0).toUpperCase()+r.slice(1):r),!a[r]&&l in n&&(a[r]=l);o&&!a.raf&&(o=o.toLowerCase(),a.raf=window[o+"RequestAnimationFrame"],a.raf&&(a.caf=window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"]))}return a.raf||(s=0,a.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-s)),o=window.setTimeout((function(){e(t+n)}),n);return s=t+n,o},a.caf=function(e){clearTimeout(e)}),a.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,i.features=a}};i.detectFeatures(),i.features.oldIE&&(i.bind=function(e,t,n,o){t=t.split(" ");for(var i,a=(o?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(i=t[l])if("object"==typeof n&&n.handleEvent){if(o){if(!n["oldIE"+i])return!1}else n["oldIE"+i]=r;e[a]("on"+i,n["oldIE"+i])}else e[a]("on"+i,n)});var a=this,r={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};function l(e,t){i.extend(a,t.publicMethods),Ae.push(e)}function s(e){var t=jt();return t-1<e?e-t:e<0?t+e:e}function c(e,t){return ke[e]||(ke[e]=[]),ke[e].push(t)}function u(e,t,n,o){return o===a.currItem.initialZoomLevel?(n[e]=a.currItem.initialPosition[e],1):(n[e]=Be(e,o),n[e]>t.min[e]?(n[e]=t.min[e],1):n[e]<t.max[e]&&(n[e]=t.max[e],1))}function d(e){var t="";r.escKey&&27===e.keyCode?t="close":r.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,a[t]()))}function p(e){e&&(ae||ie||me||ee)&&(e.preventDefault(),e.stopPropagation())}function m(){a.setScrollOffset(0,i.getScrollY())}function f(e){var t;"mousedown"===e.type&&0<e.button||(Kt?e.preventDefault():te&&"mousedown"===e.type||(_t(e,!0)&&e.preventDefault(),Fe("pointerDown"),N&&((t=i.arraySearch(lt,e.pointerId,"id"))<0&&(t=lt.length),lt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=At(e)).length,se=null,Je(),ne&&1!==e||(ne=he=!0,i.bind(window,I,a),J=ge=we=ee=le=ae=oe=ie=!1,fe=null,Fe("firstTouchStart",t),He(be,_e),xe.x=xe.y=0,He(at,t[0]),He(rt,at),st.x=De.x*Ce,ct=[{x:at.x,y:at.y}],$=X=Re(),Ge(D,!0),gt(),yt()),!ce&&1<e&&!me&&!le&&(E=D,ce=oe=!(ie=!1),xe.y=xe.x=0,He(be,_e),He(nt,t[0]),He(ot,t[1]),Ct(nt,ot,wt),ht.x=Math.abs(wt.x)-_e.x,ht.y=Math.abs(wt.y)-_e.y,ue=vt(nt,ot))))}function h(e){var t,n;e.preventDefault(),!N||-1<(t=i.arraySearch(lt,e.pointerId,"id"))&&((n=lt[t]).x=e.pageX,n.y=e.pageY),ne&&(n=At(e),fe||ae||ce?se=n:ft.x!==De.x*Ce?fe="h":(e=Math.abs(n[0].x-at.x)-Math.abs(n[0].y-at.y),Math.abs(e)>=tt&&(fe=0<e?"h":"v",se=n)))}function w(e){if(Y.isOldAndroid){if(te&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(te),te=setTimeout((function(){te=0}),600))}Fe("pointerUp"),_t(e,!1)&&e.preventDefault(),!N||-1<(n=i.arraySearch(lt,e.pointerId,"id"))&&(s=lt.splice(n,1)[0],navigator.msPointerEnabled?(s.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],s.type||(s.type=e.pointerType||"mouse")):s.type=e.pointerType||"mouse");var t=At(e),n=t.length;if(2===(n="mouseup"===e.type?0:n))return!(se=null);1===n&&He(rt,t[0]),0!==n||fe||me||(s||("mouseup"===e.type?s={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(s={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Fe("touchRelease",e,s));var o,l,s=-1;if(0===n&&(ne=!1,i.unbind(window,I,a),gt(),ce?s=0:-1!==mt&&(s=Re()-mt)),mt=1===n?Re():-1,s=-1!==s&&s<150?"zoom":"swipe",ce&&n<2&&(ce=!1,1===n&&(s="zoomPointerUp"),Fe("zoomGestureEnded")),se=null,ae||ie||me||ee)if(Je(),(Q=Q||kt()).calculateSwipeSpeed("x"),ee)Tt()<r.verticalDragRange?a.close():(o=_e.y,l=ve,et("verticalDrag",0,1,300,i.easing.cubic.out,(function(e){_e.y=(a.currItem.initialPosition.y-o)*e+o,Le((1-l)*e+l),Pe()})),Fe("onVerticalDrag",1));else{if((le||me)&&0===n){if(Rt(s,Q))return;s="zoomPointerUp"}me||("swipe"===s?!le&&D>a.currItem.fitRatio&&Ft(Q):Zt())}}i.extend(r,o);var v,g,y,x,b,_,I,C,T,D,E,S,A,O,M,k,F,R,L,Z,P,z,N,U,B,H,K,W,j,G,Y,q,V,X,$,Q,J,ee,te,ne,oe,ie,ae,re,le,se,ce,ue,de,pe,me,fe,he,we,ve,ge,ye,xe={x:0,y:0},be={x:0,y:0},_e={x:0,y:0},Ie={},Ce=0,Te={},De={x:0,y:0},Ee=0,Se=!0,Ae=[],Oe={},Me=!1,ke={},Fe=function(e){var t=ke[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var o=0;o<t.length;o++)t[o].apply(a,n)}},Re=function(){return(new Date).getTime()},Le=function(e){ve=e,a.bg.style.opacity=e*r.bgOpacity},Ze=function(e,t,n,o,i){(!Me||i&&i!==a.currItem)&&(o/=(i||a.currItem).fitRatio),e[z]=S+t+"px, "+n+"px"+A+" scale("+o+")"},Pe=function(e){pe&&(e&&(D>a.currItem.fitRatio?Me||(Qt(a.currItem,!1,!0),Me=!0):Me&&(Qt(a.currItem),Me=!1)),Ze(pe,_e.x,_e.y,D))},ze=function(e){e.container&&Ze(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ne=function(e,t){t[z]=S+e+"px, 0px"+A},Ue=function(e,t){var n;!r.loop&&t&&(n=x+(De.x*Ce-e)/De.x,t=Math.round(e-ft.x),(n<0&&0<t||n>=jt()-1&&t<0)&&(e=ft.x+t*r.mainScrollEndFriction)),ft.x=e,Ne(e,b)},Be=function(e,t){var n=ht[e]-Te[e];return be[e]+xe[e]+n-t/E*n},He=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ke=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},We=null,je=function t(){We&&(i.unbind(document,"mousemove",t),i.addClass(e,"pswp--has_mouse"),r.mouseUsed=!0,Fe("mouseUsed")),We=setTimeout((function(){We=null}),100)},Ge=function(e,t){return e=Xt(a.currItem,Ie,e),t&&(de=e),e},Ye=function(e){return(e=e||a.currItem).initialZoomLevel},qe=function(e){return 0<(e=e||a.currItem).w?r.maxSpreadZoom:1},Ve={},Xe=0,$e=function(e){Ve[e]&&(Ve[e].raf&&H(Ve[e].raf),Xe--,delete Ve[e])},Qe=function(e){Ve[e]&&$e(e),Ve[e]||(Xe++,Ve[e]={})},Je=function(){for(var e in Ve)Ve.hasOwnProperty(e)&&$e(e)},et=function(e,t,n,o,i,a,r){var l,s=Re();Qe(e),function c(){if(Ve[e]){if(l=Re()-s,o<=l)return $e(e),a(n),void(r&&r());a((n-t)*i(l/o)+t),Ve[e].raf=B(c)}}()},tt=(o={shout:Fe,listen:c,viewportSize:Ie,options:r,isMainScrollAnimating:function(){return me},getZoomLevel:function(){return D},getCurrentIndex:function(){return x},isDragging:function(){return ne},isZooming:function(){return ce},setScrollOffset:function(e,t){Te.x=e,G=Te.y=t,Fe("updateScrollOffset",Te)},applyZoomPan:function(e,t,n,o){_e.x=t,_e.y=n,D=e,Pe(o)},init:function(){if(!v&&!g){var n;a.framework=i,a.template=e,a.bg=i.getChildByClass(e,"pswp__bg"),K=e.className,v=!0,Y=i.detectFeatures(),B=Y.raf,H=Y.caf,z=Y.transform,j=Y.oldIE,a.scrollWrap=i.getChildByClass(e,"pswp__scroll-wrap"),a.container=i.getChildByClass(a.scrollWrap,"pswp__container"),b=a.container.style,a.itemHolders=k=[{el:a.container.children[0],wrap:0,index:-1},{el:a.container.children[1],wrap:0,index:-1},{el:a.container.children[2],wrap:0,index:-1}],k[0].el.style.display=k[2].el.style.display="none",function(){if(z){var t=Y.perspective&&!U;return S="translate"+(t?"3d(":"("),A=Y.perspective?", 0px)":")"}z="left",i.addClass(e,"pswp--ie"),Ne=function(e,t){t.left=e+"px"},ze=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,o=t*e.w;t*=e.h,n.width=o+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Pe=function(){var e,t,n,o;pe&&(e=pe,n=(t=1<(o=a.currItem).fitRatio?1:o.fitRatio)*o.w,o=t*o.h,e.width=n+"px",e.height=o+"px",e.left=_e.x+"px",e.top=_e.y+"px")}}(),T={resize:a.updateSize,orientationchange:function(){clearTimeout(q),q=setTimeout((function(){Ie.x!==a.scrollWrap.clientWidth&&a.updateSize()}),500),clearTimeout(V),V=setTimeout((function(){Ie.x!==a.scrollWrap.clientWidth&&a.updateSize()}),1e3)},scroll:m,keydown:d,click:p};var o=Y.isOldIOSPhone||Y.isOldAndroid||Y.isMobileOpera;for(Y.animationName&&Y.transform&&!o||(r.showAnimationDuration=r.hideAnimationDuration=0),n=0;n<Ae.length;n++)a["init"+Ae[n]]();for(t&&(a.ui=new t(a,i)).init(),Fe("firstUpdate"),x=x||r.index||0,(isNaN(x)||x<0||x>=jt())&&(x=0),a.currItem=Wt(x),(Y.isOldIOSPhone||Y.isOldAndroid)&&(Se=!1),e.setAttribute("aria-hidden","false"),r.modal&&(Se?e.style.position="fixed":(e.style.position="absolute",e.style.top=i.getScrollY()+"px")),void 0===G&&(Fe("initialLayout"),G=W=i.getScrollY()),o="pswp--open ",r.mainClass&&(o+=r.mainClass+" "),r.showHideOpacity&&(o+="pswp--animate_opacity "),o+=U?"pswp--touch":"pswp--notouch",o+=Y.animationName?" pswp--css_animation":"",o+=Y.svg?" pswp--svg":"",1===r.maxSpreadZoom&&!1===r.pinchToClose&&!1===r.zoomEl&&(o+=" pswp--zoom-prevented"),i.addClass(e,o),a.updateSize(),_=-1,Ee=null,n=0;n<3;n++)Ne((n+_)*De.x,k[n].el.style);j||i.bind(a.scrollWrap,C,a),c("initialZoomInEnd",(function(){a.setContent(k[0],x-1),a.setContent(k[2],x+1),k[0].el.style.display=k[2].el.style.display="block",r.focus&&e.focus(),i.bind(document,"keydown",a),Y.transform&&i.bind(a.scrollWrap,"click",a),r.mouseUsed||i.bind(document,"mousemove",je),i.bind(window,"resize scroll orientationchange",a),Fe("bindEvents")})),a.setContent(k[1],x),a.updateCurrItem(),Fe("afterInit"),Se||(O=setInterval((function(){Xe||ne||ce||D!==a.currItem.initialZoomLevel||a.updateSize()}),1e3)),i.addClass(e,"pswp--visible")}},close:function(){v&&(g=!(v=!1),Fe("close"),i.unbind(window,"resize scroll orientationchange",a),i.unbind(window,"scroll",T.scroll),i.unbind(document,"keydown",a),i.unbind(document,"mousemove",je),Y.transform&&i.unbind(a.scrollWrap,"click",a),ne&&i.unbind(window,I,a),clearTimeout(q),clearTimeout(V),Fe("unbindEvents"),Gt(a.currItem,null,!0,a.destroy))},destroy:function(){Fe("destroy"),Ut&&clearTimeout(Ut),e.setAttribute("aria-hidden","true"),e.className=K,O&&clearInterval(O),i.unbind(a.scrollWrap,C,a),i.unbind(window,"scroll",a),gt(),Je(),ke=null},panTo:function(e,t,n){n||(e>de.min.x?e=de.min.x:e<de.max.x&&(e=de.max.x),t>de.min.y?t=de.min.y:t<de.max.y&&(t=de.max.y)),_e.x=e,_e.y=t,Pe()},handleEvent:function(e){e=e||window.event,T[e.type]&&T[e.type](e)},goTo:function(e){var t=(e=s(e))-x;Ee=t,x=e,a.currItem=Wt(x),Ce-=t,Ue(De.x*Ce),Je(),me=!1,a.updateCurrItem()},next:function(){a.goTo(x+1)},prev:function(){a.goTo(x-1)},updateCurrZoomItem:function(e){var t;e&&Fe("beforeChange",0),pe=k[1].el.children.length?(t=k[1].el.children[0],i.hasClass(t,"pswp__zoom-wrap")?t.style:null):null,de=a.currItem.bounds,E=D=a.currItem.initialZoomLevel,_e.x=de.center.x,_e.y=de.center.y,e&&Fe("afterChange")},invalidateCurrItems:function(){M=!0;for(var e=0;e<3;e++)k[e].item&&(k[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Ee){var t,n=Math.abs(Ee);if(!(e&&n<2)){a.currItem=Wt(x),Me=!1,Fe("beforeChange",Ee),3<=n&&(_+=Ee+(0<Ee?-3:3),n=3);for(var o=0;o<n;o++)0<Ee?(t=k.shift(),k[2]=t,Ne((2+ ++_)*De.x,t.el.style),a.setContent(t,x-n+o+1+1)):(t=k.pop(),k.unshift(t),Ne(--_*De.x,t.el.style),a.setContent(t,x+n-o-1-1));!pe||1!==Math.abs(Ee)||(e=Wt(F)).initialZoomLevel!==D&&(Xt(e,Ie),Qt(e),ze(e)),Ee=0,a.updateCurrZoomItem(),F=x,Fe("afterChange")}}},updateSize:function(t){if(!Se&&r.modal){var n=i.getScrollY();if(G!==n&&(e.style.top=n+"px",G=n),!t&&Oe.x===window.innerWidth&&Oe.y===window.innerHeight)return;Oe.x=window.innerWidth,Oe.y=window.innerHeight,e.style.height=Oe.y+"px"}if(Ie.x=a.scrollWrap.clientWidth,Ie.y=a.scrollWrap.clientHeight,m(),De.x=Ie.x+Math.round(Ie.x*r.spacing),De.y=Ie.y,Ue(De.x*Ce),Fe("beforeResize"),void 0!==_){for(var o,l,c,u=0;u<3;u++)o=k[u],Ne((u+_)*De.x,o.el.style),c=x+u-1,r.loop&&2<jt()&&(c=s(c)),(l=Wt(c))&&(M||l.needsUpdate||!l.bounds)?(a.cleanSlide(l),a.setContent(o,c),1===u&&(a.currItem=l,a.updateCurrZoomItem(!0)),l.needsUpdate=!1):-1===o.index&&0<=c&&a.setContent(o,c),l&&l.container&&(Xt(l,Ie),Qt(l),ze(l));M=!1}E=D=a.currItem.initialZoomLevel,(de=a.currItem.bounds)&&(_e.x=de.center.x,_e.y=de.center.y,Pe(!0)),Fe("resize")},zoomTo:function(e,t,n,o,a){t&&(E=D,ht.x=Math.abs(t.x)-_e.x,ht.y=Math.abs(t.y)-_e.y,He(be,_e)),t=Ge(e,!1);var r={};u("x",t,r,e),u("y",t,r,e);var l=D,s=_e.x,c=_e.y;Ke(r),t=function(t){1===t?(D=e,_e.x=r.x,_e.y=r.y):(D=(e-l)*t+l,_e.x=(r.x-s)*t+s,_e.y=(r.y-c)*t+c),a&&a(t),Pe(1===t)},n?et("customZoomTo",0,1,n,o||i.easing.sine.inOut,t):t(1)}},10),nt={},ot={},it={},at={},rt={},lt=[],st={},ct=[],ut={},dt=0,pt={x:0,y:0},mt=0,ft={x:0,y:0},ht={x:0,y:0},wt={x:0,y:0},vt=function(e,t){return ut.x=Math.abs(e.x-t.x),ut.y=Math.abs(e.y-t.y),Math.sqrt(ut.x*ut.x+ut.y*ut.y)},gt=function(){re&&(H(re),re=null)},yt=function e(){ne&&(re=B(e),Mt())},xt=function e(t,n){return!(!t||t===document)&&!(t.getAttribute("class")&&-1<t.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(n(t)?t:e(t.parentNode,n))},bt={},_t=function(e,t){return bt.prevent=!xt(e.target,r.isClickableElement),Fe("preventDragEvent",e,t,bt),bt.prevent},It=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ct=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Tt=function(){var e=_e.y-a.currItem.initialPosition.y;return 1-Math.abs(e/(Ie.y/2))},Dt={},Et={},St=[],At=function(e){for(;0<St.length;)St.pop();return N?(ye=0,lt.forEach((function(e){0===ye?St[0]=e:1===ye&&(St[1]=e),ye++}))):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(St[0]=It(e.touches[0],Dt),1<e.touches.length&&(St[1]=It(e.touches[1],Et))):(Dt.x=e.pageX,Dt.y=e.pageY,Dt.id="",St[0]=Dt),St},Ot=function(e,t){var n,o,i,l=_e[e]+t[e],s=0<t[e],c=ft.x+t.x,u=ft.x-st.x,d=l>de.min[e]||l<de.max[e]?r.panEndFriction:1;if(l=_e[e]+t[e]*d,(r.allowPanToNext||D===a.currItem.initialZoomLevel)&&(pe?"h"!==fe||"x"!==e||ie||(s?(l>de.min[e]&&(d=r.panEndFriction,de.min[e],n=de.min[e]-be[e]),(n<=0||u<0)&&1<jt()?(i=c,u<0&&c>st.x&&(i=st.x)):de.min.x!==de.max.x&&(o=l)):(l<de.max[e]&&(d=r.panEndFriction,de.max[e],n=be[e]-de.max[e]),(n<=0||0<u)&&1<jt()?(i=c,0<u&&c<st.x&&(i=st.x)):de.min.x!==de.max.x&&(o=l))):i=c,"x"===e))return void 0!==i&&(Ue(i,!0),le=i!==st.x),de.min.x!==de.max.x&&(void 0!==o?_e.x=o:le||(_e.x+=t.x*d)),void 0!==i;me||le||D>a.currItem.fitRatio&&(_e[e]+=t[e]*d)},Mt=function(){if(se){var e,t,n,o=se.length;if(0!==o)if(He(nt,se[0]),it.x=nt.x-at.x,it.y=nt.y-at.y,ce&&1<o)at.x=nt.x,at.y=nt.y,!it.x&&!it.y&&function(e,t){return e.x===t.x&&e.y===t.y}(se[1],ot)||(He(ot,se[1]),ie||(ie=!0,Fe("zoomGestureStarted")),n=vt(nt,ot),(i=Lt(n))>a.currItem.initialZoomLevel+a.currItem.initialZoomLevel/15&&(ge=!0),e=1,t=Ye(),n=qe(),i<t?r.pinchToClose&&!ge&&E<=a.currItem.initialZoomLevel?(Le(o=1-(t-i)/(t/1.2)),Fe("onPinchClose",o),we=!0):i=t-(e=1<(e=(t-i)/t)?1:e)*(t/3):n<i&&(i=n+(e=1<(e=(i-n)/(6*t))?1:e)*t),e<0&&(e=0),Ct(nt,ot,pt),xe.x+=pt.x-wt.x,xe.y+=pt.y-wt.y,He(wt,pt),_e.x=Be("x",i),_e.y=Be("y",i),J=D<i,D=i,Pe());else if(fe&&(he&&(he=!1,Math.abs(it.x)>=tt&&(it.x-=se[0].x-rt.x),Math.abs(it.y)>=tt&&(it.y-=se[0].y-rt.y)),at.x=nt.x,at.y=nt.y,0!==it.x||0!==it.y)){if("v"===fe&&r.closeOnVerticalDrag&&"fit"===r.scaleMode&&D===a.currItem.initialZoomLevel){xe.y+=it.y,_e.y+=it.y;var i=Tt();return ee=!0,Fe("onVerticalDrag",i),Le(i),void Pe()}(function(e,t,n){var o;50<e-$&&((o=2<ct.length?ct.shift():{}).x=t,o.y=n,ct.push(o),$=e)})(Re(),nt.x,nt.y),ae=!0,de=a.currItem.bounds,Ot("x",it)||(Ot("y",it),Ke(_e),Pe())}}},kt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(o){t=1<ct.length?(e=Re()-$+50,ct[ct.length-2][o]):(e=Re()-X,rt[o]),n.lastFlickOffset[o]=at[o]-t,n.lastFlickDist[o]=Math.abs(n.lastFlickOffset[o]),20<n.lastFlickDist[o]?n.lastFlickSpeed[o]=n.lastFlickOffset[o]/e:n.lastFlickSpeed[o]=0,Math.abs(n.lastFlickSpeed[o])<.1&&(n.lastFlickSpeed[o]=0),n.slowDownRatio[o]=.95,n.slowDownRatioReverse[o]=1-n.slowDownRatio[o],n.speedDecelerationRatio[o]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(_e[e]>de.min[e]?n.backAnimDestination[e]=de.min[e]:_e[e]<de.max[e]&&(n.backAnimDestination[e]=de.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,et("bounceZoomPan"+e,_e[e],n.backAnimDestination[e],t||300,i.easing.sine.out,(function(t){_e[e]=t,Pe()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,_e[e]+=n.distanceOffset[e])},panAnimLoop:function(){Ve.zoomPan&&(Ve.zoomPan.raf=B(n.panAnimLoop),n.now=Re(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Pe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05&&(_e.x=Math.round(_e.x),_e.y=Math.round(_e.y),Pe(),$e("zoomPan")))}};return n},Ft=function(e){if(e.calculateSwipeSpeed("y"),de=a.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;Qe("zoomPan"),e.lastNow=Re(),e.panAnimLoop()},Rt=function(e,t){var n,o;me||(dt=x),"swipe"===e&&(o=at.x-rt.x,e=t.lastFlickDist.x<10,30<o&&(e||20<t.lastFlickOffset.x)?s=-1:o<-30&&(e||t.lastFlickOffset.x<-20)&&(s=1)),s&&((x+=s)<0?(x=r.loop?jt()-1:0,l=!0):x>=jt()&&(x=r.loop?0:jt()-1,l=!0),l&&!r.loop||(Ee+=s,Ce-=s,n=!0));var l=De.x*Ce,s=Math.abs(l-ft.x),c=n||l>ft.x==0<t.lastFlickSpeed.x?(c=0<Math.abs(t.lastFlickSpeed.x)?s/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),Math.max(c,250)):333;return dt===x&&(n=!1),me=!0,Fe("mainScrollAnimStart"),et("mainScroll",ft.x,l,c,i.easing.cubic.out,Ue,(function(){Je(),me=!1,dt=-1,!n&&dt===x||a.updateCurrItem(),Fe("mainScrollAnimComplete")})),n&&a.updateCurrItem(!0),n},Lt=function(e){return 1/ue*e*E},Zt=function(){var e=D,t=Ye(),n=qe();D<t?e=t:n<D&&(e=n);var o,r=ve;return we&&!J&&!ge&&D<t?a.close():(we&&(o=function(e){Le((1-r)*e+r)}),a.zoomTo(e,0,200,i.easing.cubic.out,o)),!0};function Pt(e){function t(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,n.onload=n.onerror=null,n=null}e.loading=!0,e.loaded=!1;var n=e.img=i.createEl("pswp__img","img");return n.onload=t,n.onerror=function(){e.loadError=!0,t()},n.src=e.src,n}function zt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=r.errorMsg.replace("%url%",e.src),1)}function Nt(){if(qt.length){for(var e,t=0;t<qt.length;t++)(e=qt[t]).holder.index===e.index&&$t(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);qt=[]}}l("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,o,i){R=e+t,L=e+n,Z=e+o,P=i?e+i:""}(N=Y.pointerEvent)&&Y.touch&&(Y.touch=!1),N?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):Y.touch?(e("touch","start","move","end","cancel"),U=!0):e("mouse","down","move","up"),I=L+" "+Z+" "+P,C=R,N&&!U&&(U=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),a.likelyTouchDevice=U,T[R]=f,T[L]=h,T[Z]=w,P&&(T[P]=T[Z]),Y.touch&&(C+=" mousedown",I+=" mousemove mouseup",T.mousedown=T[R],T.mousemove=T[L],T.mouseup=T[Z]),U||(r.allowPanToNext=!1)}}});var Ut,Bt,Ht,Kt,Wt,jt,Gt=function(t,n,o,l){var s;function c(){$e("initialZoom"),o?(a.template.removeAttribute("style"),a.bg.removeAttribute("style")):(Le(1),n&&(n.style.display="block"),i.addClass(e,"pswp--animated-in"),Fe("initialZoom"+(o?"OutEnd":"InEnd"))),l&&l(),Kt=!1}Ut&&clearTimeout(Ut),Ht=Kt=!0,t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=r.getThumbBoundsFn&&r.getThumbBoundsFn(x);var u,d,p=o?r.hideAnimationDuration:r.showAnimationDuration;if(!p||!s||void 0===s.x)return Fe("initialZoom"+(o?"Out":"In")),D=t.initialZoomLevel,He(_e,t.initialPosition),Pe(),e.style.opacity=o?0:1,Le(1),void(p?setTimeout((function(){c()}),p):c());u=y,d=!a.currItem.src||a.currItem.loadError||r.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),o||(D=s.w/t.w,_e.x=s.x,_e.y=s.y-W,a[d?"template":"bg"].style.opacity=.001,Pe()),Qe("initialZoom"),o&&!u&&i.removeClass(e,"pswp--animated-in"),d&&(o?i[(u?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){i.addClass(e,"pswp--animate_opacity")}),30)),Ut=setTimeout((function(){var n,a,r,l,m;Fe("initialZoom"+(o?"Out":"In")),o?(n=s.w/t.w,a={x:_e.x,y:_e.y},r=D,l=ve,m=function(t){1===t?(D=n,_e.x=s.x,_e.y=s.y-G):(D=(n-r)*t+r,_e.x=(s.x-a.x)*t+a.x,_e.y=(s.y-G-a.y)*t+a.y),Pe(),d?e.style.opacity=1-t:Le(l-t*l)},u?et("initialZoom",0,1,p,i.easing.cubic.out,m,c):(m(1),Ut=setTimeout(c,p+20))):(D=t.initialZoomLevel,He(_e,t.initialPosition),Pe(),Le(1),d?e.style.opacity=1:Le(1),Ut=setTimeout(c,p+20))}),o?25:90)},Yt={},qt=[],Vt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Bt.length}},Xt=function(e,t,n){if(!e.src||e.loadError)return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds;var o,i=!n;return i&&(e.vGap||(e.vGap={top:0,bottom:0}),Fe("parseVerticalMargin",e)),Yt.x=t.x,Yt.y=t.y-e.vGap.top-e.vGap.bottom,i&&(o=Yt.x/e.w,t=Yt.y/e.h,e.fitRatio=o<t?o:t,"orig"===(t=r.scaleMode)?n=1:"fit"===t&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})),n?(function(e,t,n){var o=e.bounds;o.center.x=Math.round((Yt.x-t)/2),o.center.y=Math.round((Yt.y-n)/2)+e.vGap.top,o.max.x=t>Yt.x?Math.round(Yt.x-t):o.center.x,o.max.y=n>Yt.y?Math.round(Yt.y-n)+e.vGap.top:o.center.y,o.min.x=t>Yt.x?0:o.center.x,o.min.y=n>Yt.y?e.vGap.top:o.center.y}(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0},$t=function(e,t,n,o,i,r){t.loadError||o&&(t.imageAppended=!0,Qt(t,o,t===a.currItem&&Me),n.appendChild(o),r&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},Qt=function(e,t,n){var o;e.src&&(t=t||e.container.lastChild,o=n?e.w:Math.round(e.w*e.fitRatio),n=n?e.h:Math.round(e.h*e.fitRatio),e.placeholder&&!e.loaded&&(e.placeholder.style.width=o+"px",e.placeholder.style.height=n+"px"),t.style.width=o+"px",t.style.height=n+"px")};function Jt(e,t,n){var o=document.createEvent("CustomEvent");n={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"},o.initCustomEvent("pswpTap",!0,!0,n),e.target.dispatchEvent(o)}l("Controller",{publicMethods:{lazyLoadItem:function(e){e=s(e);var t=Wt(e);t&&(!t.loaded&&!t.loading||M)&&(Fe("gettingData",e,t),t.src&&Pt(t))},initController:function(){i.extend(r,Vt,!0),a.items=Bt=n,Wt=a.getItemAt,jt=r.getNumItemsFn,r.loop,jt()<3&&(r.loop=!1),c("beforeChange",(function(e){for(var t=r.preload,n=null===e||0<=e,o=Math.min(t[0],jt()),i=Math.min(t[1],jt()),l=1;l<=(n?i:o);l++)a.lazyLoadItem(x+l);for(l=1;l<=(n?o:i);l++)a.lazyLoadItem(x-l)})),c("initialLayout",(function(){a.currItem.initialLayout=r.getThumbBoundsFn&&r.getThumbBoundsFn(x)})),c("mainScrollAnimComplete",Nt),c("initialZoomInEnd",Nt),c("destroy",(function(){for(var e,t=0;t<Bt.length;t++)(e=Bt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);qt=null}))},getItemAt:function(e){return 0<=e&&void 0!==Bt[e]&&Bt[e]},allowProgressiveImg:function(){return r.forceProgressiveLoading||!U||r.mouseUsed||1200<screen.width},setContent:function(e,t){r.loop&&(t=s(t));var n=a.getItemAt(e.index);n&&(n.container=null);var o,l,c=a.getItemAt(t);c?(Fe("gettingData",t,c),e.index=t,l=(e.item=c).container=i.createEl("pswp__zoom-wrap"),!c.src&&c.html&&(c.html.tagName?l.appendChild(c.html):l.innerHTML=c.html),zt(c),Xt(c,Ie),!c.src||c.loadError||c.loaded?c.src&&!c.loadError&&((o=i.createEl("pswp__img","img")).style.opacity=1,o.src=c.src,Qt(c,o),$t(t,c,l,o,!0)):(c.loadComplete=function(n){if(v){if(e&&e.index===t){if(zt(n,!0))return n.loadComplete=n.img=null,Xt(n,Ie),ze(n),void(e.index===x&&a.updateCurrZoomItem());n.imageAppended?!Kt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):Y.transform&&(me||Kt)?qt.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):$t(t,n,l,n.img,me||Kt,!0)}n.loadComplete=null,n.img=null,Fe("imageLoadComplete",t,n)}},i.features.transform&&(n="pswp__img pswp__img--placeholder",n+=c.msrc?"":" pswp__img--placeholder--blank",n=i.createEl(n,c.msrc?"img":""),c.msrc&&(n.src=c.msrc),Qt(c,n),l.appendChild(n),c.placeholder=n),c.loading||Pt(c),a.allowProgressiveImg()&&(!Ht&&Y.transform?qt.push({item:c,baseDiv:l,img:c.img,index:t,holder:e}):$t(t,c,l,c.img,!0,!0))),Ht||t!==x?ze(c):(pe=l.style,Gt(c,o||c.img)),e.el.innerHTML="",e.el.appendChild(l)):e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var en,tn,nn={};function on(){rn&&clearTimeout(rn),sn&&clearTimeout(sn)}function an(){var e="",t=vn(),o={};return null!==(t=(t=(t=(t=t.replace("%5B","[")).replace("%5D","]")).replace(/([^|])(poster=|videoplayer)/gm,"$1|$2")).match(/^!([\w\-[\]]+?\/(?:(\d+)(?=\/))?(https?:\/\/[^&]*)?([A-Z]{2}\/[_\w]*)?)/im))?(e=(e=t[1]).substring(e.indexOf("/")+1,e.length),/^([A-Z]{2}\/[_\w]*)$/im.test(e)&&(e=e.replace("/","-")),jQuery.each(n,(function(t,n){return void 0!==n.contentID&&n.contentID=="jig-contentID-"+e||n.src==e?(o.pid=t,!1):void 0})),o.pid=parseInt(o.pid,10)):o.pid=0,o}l("Tap",{publicMethods:{initTap:function(){c("firstTouchStart",a.onTapStart),c("touchRelease",a.onTapRelease),c("destroy",(function(){nn={},en=null}))},onTapStart:function(e){1<e.length&&(clearTimeout(en),en=null)},onTapRelease:function(e,t){var n,o,a;i.hasClass(e.target,"pswp__button")||i.hasClass(e.target,"pswp__share-modal")||t&&(ae||oe||Xe||(n=t,en&&(clearTimeout(en),en=null,o=n,a=nn,Math.abs(o.x-a.x)<25&&Math.abs(o.y-a.y)<25)?Fe("doubleTap",n):"mouse"!==t.type?"BUTTON"===e.target.tagName.toUpperCase()||i.hasClass(e.target,"pswp__single-tap")?Jt(e,t):(He(nn,n),en=setTimeout((function(){Jt(e,t),en=null}),300)):Jt(e,t,"mouse")))}}}),l("DesktopZoom",{publicMethods:{initDesktopZoom:function(){j||(U?c("mouseUsed",(function(){a.setupDesktopZoom()})):a.setupDesktopZoom(!0))},setupDesktopZoom:function(t){tn={};var n,o="wheel mousewheel DOMMouseScroll";function r(){a.mouseZoomedIn&&(i.removeClass(e,"pswp--zoomed-in"),a.mouseZoomedIn=!1),D<1?i.addClass(e,"pswp--zoom-allowed"):i.removeClass(e,"pswp--zoom-allowed"),l()}function l(){n&&(i.removeClass(e,"pswp--dragging"),n=!1)}c("bindEvents",(function(){i.bind(e,o,a.handleMouseWheel)})),c("unbindEvents",(function(){tn&&i.unbind(e,o,a.handleMouseWheel)})),a.mouseZoomedIn=!1,c("resize",r),c("afterChange",r),c("pointerDown",(function(){a.mouseZoomedIn&&(n=!0,i.addClass(e,"pswp--dragging"))})),c("pointerUp",l),t||r()},handleMouseWheel:function(e){if(D<=a.currItem.fitRatio)return r.modal&&(!r.closeOnScroll||Xe||ne?e.preventDefault():z&&2<Math.abs(e.deltaY)&&(y=!0,a.close())),!0;if(e.stopPropagation(),tn.x=0,"deltaX"in e)1===e.deltaMode?(tn.x=18*e.deltaX,tn.y=18*e.deltaY):(tn.x=e.deltaX,tn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(tn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?tn.y=-.16*e.wheelDeltaY:tn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;tn.y=e.detail}Ge(D,!0);var t=_e.x-tn.x,n=_e.y-tn.y;(r.modal||t<=de.min.x&&t>=de.max.x&&n<=de.min.y&&n>=de.max.y)&&e.preventDefault(),a.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:Ie.x/2+Te.x,y:Ie.y/2+Te.y};var n=r.getDoubleTapZoom(!0,a.currItem),o=D===n;a.mouseZoomedIn=!o,a.zoomTo(o?a.currItem.initialZoomLevel:n,t,333),i[(o?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var rn,ln,sn,cn,un,dn,pn,mn,fn,hn,wn={history:!0,galleryUID:1},vn=function(){return hn.hash.substring(1)},gn=function e(){var t,o;sn&&clearTimeout(sn),Xe||ne?sn=setTimeout(e,500):(cn?clearTimeout(ln):cn=!0,t="!"+r.galleryUID+"/",void 0!==n[x].contentID?null!==(o=/(?:jig-contentID)-(\w{2})-([^\s]*)/im.exec(n[x].contentID))&&(t+=o[1]+"/"+o[2]):t+=n[x].src,pn?(o=hn.href.split("#")[0]+"#"+t,hn.replace(o)):(-1===hn.hash.indexOf(t)&&-1===hn.hash.indexOf("%5B")&&-1===hn.hash.indexOf("%5D")&&(fn=!0),hn.hash=t),pn=!0,ln=setTimeout((function(){cn=!1}),60))};l("History",{publicMethods:{initHistory:function(){var e;i.extend(r,wn,!0),r.history&&(hn=window.location,pn=mn=fn=!1,c("afterChange",a.updateURL),c("unbindEvents",(function(){i.unbind(window,"hashchange",a.onHashChange)})),e=function(){dn=!0,mn||(fn?history.back():"pushState"in history?history.pushState("",document.title,hn.pathname+hn.search):hn.hash=""),on()},c("unbindEvents",(function(){y&&e()})),c("destroy",(function(){dn||e()})),c("firstUpdate",(function(){x=an().pid})),setTimeout((function(){v&&i.bind(window,"hashchange",a.onHashChange)}),40))},onHashChange:function(){if(""===vn())return mn=!0,void a.close();cn||(un=!0,a.goTo(an().pid),un=!1)},updateURL:function(){on(),un||(pn?rn=setTimeout(gn,800):gn())}}}),i.extend(a,o)}})),function(e,t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,(function(){"use strict";return function(e,t){function n(e){if(E)return!0;e=e||window.event,D.timeToIdle&&D.mouseUsed&&!x&&l();for(var n,o,i=(e.target||e.srcElement).getAttribute("class")||"",a=0;a<P.length;a++)(n=P[a]).onTap&&-1<i.indexOf("pswp__"+n.name)&&(n.onTap(),o=!0);o&&(e.stopPropagation&&e.stopPropagation(),E=!0,e=t.features.isOldAndroid?600:30,setTimeout((function(){E=!1}),e))}function o(){var e=1===D.getNumItemsFn();e!==T&&(L(m,"ui--one-slide",e),T=e)}function i(){L(g,"share-modal--hidden",F)}function a(){return(F=!F)?(t.removeClass(g,"pswp__share-modal--fade-in"),setTimeout((function(){F&&i()}),300)):(i(),setTimeout((function(){F||t.addClass(g,"pswp__share-modal--fade-in")}),30)),F||(s="",c=e.options.shareButtons,n=location.hash?(r=(n=decodeURI(document.location.href)).split("#!"))[0]+"#!"+r[1]:location.href,void 0!==e.options.socialButtons&&(c=[],l=(l=(l=(l=e.options.socialButtons).toLowerCase()).replace(/[^ftp]/gi,"")).split(""),a=jQuery.inArray("f",l),r=jQuery.inArray("t",l),l=jQuery.inArray("p",l),~a&&(c[a]=e.options.shareButtons[0]),~r&&(c[r]=e.options.shareButtons[1]),~l&&(c[l]=e.options.shareButtons[2]),void 0!==e.options.shareButtons[3]&&c.push(e.options.shareButtons[3])),jQuery.each(c,(function(t,i){void 0!==i&&(o=(e.currItem.title||"")+(e.currItem.description?(e.currItem.title?" ":"")+e.currItem.description:"")||document.title,o=i.url.replace("{{url}}",encodeURIComponent(n)).replace("{{facebook_url}}",encodeURIComponent(n.replace("#!",(-1===n.indexOf("?")?"?":"&")+"_escaped_fragment_="))).replace("{{image_url}}",encodeURIComponent(e.currItem.src||"")).replace("{{raw_image_url}}",e.currItem.src||"").replace("{{title}}",encodeURIComponent(e.currItem.title||document.title)).replace("{{description}}",encodeURIComponent(jQuery("<p>"+o.replace(/<a(?:.+?)href=['"](.+?)['"](?:.+?>)(.+?)(?:<\/a>)/gm,"$2: $1")+"</p>").text())),s+='<a href="'+o+'" target="_blank" class="pswp__share--'+i.id+'"'+(i.download?"download":"")+">"+i.label+"</a>")})),g.children[0].innerHTML=s,g.children[0].onclick=d),0;var n,o,a,r,l,s,c}function r(e){for(var n=0;n<D.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+D.closeElClasses[n]))return!0}function l(){clearTimeout(A),Z=0,x&&O.setIdle(!1)}function s(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(A),A=setTimeout((function(){O.setIdle(!0)}),D.timeToIdleOutside))}function c(e){I!==e&&(L(_,"preloader--active",!e),I=e)}function u(n){var o,i=n.vGap;!e.likelyTouchDevice||D.mouseUsed||screen.width>D.fitControlsWidth?(o=D.barsSize,D.captionEl&&"auto"===o.bottom?(h||((h=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),m.insertBefore(h,f),t.addClass(m,"pswp__ui--fit")),D.addCaptionHTMLFn(n,h,!0)?(n=h.clientHeight,i.bottom=parseInt(n,10)||44):i.bottom=o.top):i.bottom="auto"===o.bottom?0:o.bottom,i.top=o.top):i.top=i.bottom=0}function d(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),F||a(),1))}var p,m,f,h,w,v,g,y,x,b,_,I,C,T,D,E,S,A,O=this,M=!1,k=!0,F=!0,R={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},L=function(e,n,o){t[(o?"add":"remove")+"Class"](e,"pswp__"+n)},Z=0,P=[{name:"caption",option:"captionEl",onInit:function(e){f=e}},{name:"share-modal",option:"shareEl",onInit:function(e){g=e},onTap:function(){a()}},{name:"button--share",option:"shareEl",onInit:function(e){v=e},onTap:function(){a()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){w=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){p.isFullscreen()?p.exit():p.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){_=e}}];O.init=function(){var i;t.extend(e.options,R,!0),D=e.options,m=t.getChildByClass(e.scrollWrap,"pswp__ui"),(b=e.listen)("onVerticalDrag",(function(e){k&&e<.95?O.hideControls():!k&&.95<=e&&O.showControls()})),b("onPinchClose",(function(e){k&&e<.9?(O.hideControls(),i=!0):i&&!k&&.9<e&&O.showControls()})),b("zoomGestureEnded",(function(){i=!1})),b("beforeChange",O.update),b("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(D.getDoubleTapZoom(!1,e.currItem),t,333)})),b("preventDragEvent",(function(e,t,n){var o=e.target||e.srcElement;o&&o.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<o.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)})),b("bindEvents",(function(){t.bind(m,"pswpTap click",n),t.bind(e.scrollWrap,"pswpTap",O.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",O.onMouseOver)})),b("unbindEvents",(function(){F||a(),S&&clearInterval(S),t.unbind(document,"mouseout",s),t.unbind(document,"mousemove",l),t.unbind(m,"pswpTap click",n),t.unbind(e.scrollWrap,"pswpTap",O.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",O.onMouseOver),p&&(t.unbind(document,p.eventK,O.updateFullscreen),p.isFullscreen()&&(D.hideAnimationDuration=0,p.exit()),p=null)})),b("destroy",(function(){D.captionEl&&(h&&m.removeChild(h),t.removeClass(f,"pswp__caption--empty")),g&&(g.children[0].onclick=null),t.removeClass(m,"pswp__ui--over-close"),t.addClass(m,"pswp__ui--hidden"),O.setIdle(!1)})),D.showAnimationDuration||t.removeClass(m,"pswp__ui--hidden"),b("initialZoomIn",(function(){D.showAnimationDuration&&t.removeClass(m,"pswp__ui--hidden")})),b("initialZoomOut",(function(){t.addClass(m,"pswp__ui--hidden")})),b("parseVerticalMargin",u),function(){function e(e){if(e)for(var a=e.length,r=0;r<a;r++){n=e[r],o=n.className;for(var l=0;l<P.length;l++)i=P[l],-1<o.indexOf("pswp__"+i.name)&&(D[i.option]?(t.removeClass(n,"pswp__element--disabled"),i.onInit&&i.onInit(n)):t.addClass(n,"pswp__element--disabled"))}}var n,o,i;e(m.children);var a=t.getChildByClass(m,"pswp__top-bar");a&&e(a.children)}(),D.shareEl&&v&&g&&(F=!0),o(),D.timeToIdle&&b("mouseUsed",(function(){t.bind(document,"mousemove",l),t.bind(document,"mouseout",s),S=setInterval((function(){2==++Z&&O.setIdle(!0)}),D.timeToIdle/2)})),D.fullscreenEl&&!t.features.isOldAndroid&&((p=p||O.getFullscreenAPI())?(t.bind(document,p.eventK,O.updateFullscreen),O.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs")),D.preloaderEl&&(c(!0),b("beforeChange",(function(){clearTimeout(C),C=setTimeout((function(){e.currItem&&e.currItem.loading?e.allowProgressiveImg()&&(!e.currItem.img||e.currItem.img.naturalWidth)||c(!1):c(!0)}),D.loadingIndicatorDelay)})),b("imageLoadComplete",(function(t,n){e.currItem===n&&c(!0)})))},O.setIdle=function(e){L(m,"ui--idle",x=e)},O.update=function(){M=!(!k||!e.currItem||(O.updateIndexIndicator(),D.captionEl&&(D.addCaptionHTMLFn(e.currItem,f),L(f,"caption--empty",!e.currItem.title&&!e.currItem.description)),0)),F||a(),o()},O.updateFullscreen=function(n){n&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(p.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},O.updateIndexIndicator=function(){D.counterEl&&(w.innerHTML=e.getCurrentIndex()+1+D.indexIndicatorSep+D.getNumItemsFn())},O.onGlobalTap=function(n){var o=(n=n||window.event).target||n.srcElement;E||(n.detail&&"mouse"===n.detail.pointerType?r(o)?e.close():t.hasClass(o,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?D.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint)):(D.tapToToggleControls&&(k?O.hideControls():O.showControls()),D.tapToClose&&(t.hasClass(o,"pswp__img")||r(o))&&e.close()))},O.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement,L(m,"ui--over-close",r(e))},O.hideControls=function(){t.addClass(m,"pswp__ui--hidden"),k=!1},O.showControls=function(){k=!0,M||O.update(),t.removeClass(m,"pswp__ui--hidden")},O.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},O.getFullscreenAPI=function(){var t,n=document.documentElement,o="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(y=D.closeOnScroll,D.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return D.closeOnScroll=y,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}}})),function(e){e.fn.JIGphotoSwipe=function(t){function n(t){t.preventDefault();var n=e(t.target).closest(".jig-imageContainer").attr("class"),o=/(?:jig-contentID)-(\w{2})-([^\s]*)/im.exec(n);return t=(n=e(t.target).closest("a.jig-link")).attr("rel").split(" ").shift(),n=null!=o?o[0]:n.attr("href"),l(n,t),!1}var o=this,i=e(o[0]).closest(".justified-image-grid"),a=e.extend(!0,{},t),r=function(t){var n=[];return o.filter('[rel~="'+t+'"]').each((function(t){var o=e(this),i=o.find("img"),a=o.find("img").attr("alt"),r=o.attr("title"),l=o.attr("data-wh").split("x"),s=("jig-overflow"==o.parent().attr("class")?o.closest(".jig-imageContainer"):o).attr("class");s=/(?:jig-contentID)-(\w{2})-([^\s]*)/im.exec(s),i={src:o.attr("href"),w:parseInt(l[0],10),h:parseInt(l[1],10),msrc:i.attr("src")},null!=s&&(i.contentID=s[0]),a&&(i.title=a),r&&(i.description=r),i.el=o[0],n.push(i)})),n},l=function(n,o,i){var l,s=r(o),c=!1;if(0==s.length)return!1;e.each(s,(function(e,o){return void 0!==o.contentID&&o.contentID==n||o.src==n?(t.index=e,!1):void 0})),t.galleryUID=o,t.getThumbBoundsFn=function(t){if("jig-overflow"!=e(s[t].el).parent().attr("class"))return{x:e(window).width()/2,y:e(window).height()/2+e(window).scrollTop(),w:0};var n=s[t].el.getElementsByTagName("img")[0];return t=e(window).scrollTop(),{x:(n=n.getBoundingClientRect()).left,y:n.top+t,w:n.width}},t.addCaptionHTMLFn=function(e,t,n){var o=[];return void 0!==e.title&&o.push(e.title),void 0!==e.description&&o.push("<small>"+e.description+"</small>"),0==o.length?(t.children[0].innerText="",!1):(t.children[0].innerHTML=o.join("<br/>"),!0)},t.shareButtons=[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{facebook_url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{title}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{description}}"}],void 0!==t.allowDownload&&!0===t.allowDownload&&t.shareButtons.push({id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}),i?void(t.showAnimationDuration=0)!==a.closeOnScroll&&1!=a.closeOnScroll||(l=!(t.closeOnScroll=!1)):t.showAnimationDuration=void 0===a.showAnimationDuration?333:a.showAnimationDuration,"jig-overflow"==(i=e(s[t.index].el)).parent().attr("class")&&("0px"===i.find("img").css("margin-left")&&!i.parent().parent().hasClass("differentAspectRatio")||(c=!0)),c||void 0!==t.aspectRatioMismatch&&!0===t.aspectRatioMismatch?(t.showAnimationDuration=0,t.showHideOpacity=void 0===a.showHideOpacity||a.showHideOpacity,t.mainClass="hidePsPlaceholder"):(t.showAnimationDuration=void 0===a.showAnimationDuration?333:a.showAnimationDuration,t.showHideOpacity=void 0!==a.showHideOpacity&&a.showHideOpacity,t.mainClass=void 0===a.mainClass?"":a.mainClass),e(".pswp").removeAttr("style"),e(".pswp").removeClass((function(e,t){return(t.match(/pswp--\S+theme/g)||[]).join(" ")})),"undefined"!==t.customTheme&&e(".pswp").addClass("pswp--"+t.customTheme+"-theme"),e.fn.JIGphotoSwipe.gallery=new PhotoSwipe(e(".pswp")[0],PhotoSwipeUI_Default,s,t),e.fn.JIGphotoSwipe.gallery.init(),1==l&&setTimeout((function(){e.fn.JIGphotoSwipe.gallery.options.closeOnScroll=!0}),2e3)};!function(){0===e(".pswp").length&&(c=void 0!==t.captionAlign?" pswp__ca_"+t.captionAlign:" pswp__ca_center",e("body").append('<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden'+c+'"><div class="pswp__top-bar"><div class="pswp__counter"></div><span class="pswp__button pswp__button--close" title="Close (Esc)"></span><span class="pswp__button pswp__button--share" title="Share"></span><span class="pswp__button pswp__button--fs" title="Toggle fullscreen"></span><span class="pswp__button pswp__button--zoom" title="Zoom in/out"></span><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><span class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></span><span class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></span><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>')),i.off("click.photoswipe").on("click.photoswipe","a.jig-link",n);var o,a,r,s,c=(a="",s={},null!==(o=(r=(r=(r=(r=location.hash).replace("%5B","[")).replace("%5D","]")).replace(/([^|])(poster=|videoplayer)/gm,"$1|$2")).match(/^#!([\w\-[\]]+?\/(?:(\d+)(?=\/))?(https?:\/\/[^&]*)?([A-Z]{2}\/[_\w]*)?)/im))&&(a=(a=o[1]).substring(a.indexOf("/")+1,a.length),/^([A-Z]{2}\/[_\w]*)$/im.test(a)&&(a=a.replace("/","-"))),s.contentID="jig-contentID-"+a,s.theRel=r.substring(2,r.indexOf("/")),s);c.theRel&&c.contentID&&l(c.contentID,c.theRel,!0)}()}}(jQuery);